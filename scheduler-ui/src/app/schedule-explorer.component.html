<div class="explorer-container">
  <div class="explorer-header">
    <div class="header-content">
      <div>
        <h2>School Schedule</h2>
        <p class="description">
          Visual calendar view of your classes. Click a class to edit it.
        </p>
      </div>
      <button class="btn-primary" (click)="openNewClassModal()">+ Add Class</button>
    </div>
  </div>

  <!-- Calendar Grid View -->
  <div class="calendar-view">
    <div class="view-toggle">
      <label>
        <input type="checkbox" [checked]="showTimes" (change)="toggleViewMode()" />
        Admin Mode (show period/time)
      </label>
    </div>
    <app-calendar-grid 
      [classes]="classes"
      [conflicts]="convertConflicts()"
      [showTimes]="showTimes"
      (classClicked)="editClass($event)">
    </app-calendar-grid>
  </div>

  <!-- Class List Section -->
  <div class="classes-section">
    <h3>All Classes ({{ classes.length }})</h3>
    <div *ngIf="classes.length === 0" class="empty-state">
      No classes yet. Click "+ Add Class" to get started!
    </div>
    <table *ngIf="classes.length > 0" class="classes-table">
      <thead>
        <tr>
          <th>Class Name</th>
          <th>Term Slot</th>
          <th>Term</th>
          <th>Duration</th>
          <th>Priority</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let cls of classes">
          <td><strong>{{ cls.name }}</strong></td>
          <td>{{ cls.termSlot }}</td>
          <td>{{ cls.term }}</td>
          <td>{{ cls.durationType }}</td>
          <td>
            <span
              class="priority-badge"
              [style.backgroundColor]="getPriorityColor(cls.priority)"
            >
              {{ cls.priority }}
            </span>
          </td>
          <td>
            <div class="action-buttons">
              <button class="btn-edit" (click)="editClass(cls)">Edit</button>
              <button class="btn-delete" (click)="deleteClass(cls)">Delete</button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Edit Modal -->
  <app-edit-class-modal
    *ngIf="showEditModal"
    [class]="editingClass"
    (saved)="onClassSaved($event)"
    (closed)="onModalClosed()">
  </app-edit-class-modal>
</div>
